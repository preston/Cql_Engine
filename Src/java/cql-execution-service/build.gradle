apply plugin: 'war'
apply from: 'https://raw.github.com/saladinkzn/gretty/master/pluginScripts/gretty.plugin'

dependencies {
  // Jersey server
  compile 'org.glassfish.jersey.containers:jersey-container-servlet:2.22.1'
  // Jetty like application server
  compile 'org.eclipse.jetty:jetty-jsp:9.3.0.M1'
  compile group: 'com.googlecode.json-simple', name: 'json-simple', version: '1.1'
  compile group: 'ca.uhn.hapi.fhir', name: 'hapi-fhir-base', version: '1.5'
  compile group: 'ca.uhn.hapi.fhir', name: 'hapi-fhir-structures-dstu3', version: '1.5'
  compile project(':cql-engine')
  compile project(':cql-engine-fhir')
}

generateSources {
    inputs.dir "${projectDir}/../../cql-lm/schema"

    doLast {
        ant.xjc(destdir: xjc.destDir, package: 'org.cqframework.cql.elm.execution', schema: "${projectDir}/../../cql-lm/schema/elm/library.xsd") {
            arg(line: "${xjc.args} -npa -XautoInheritance -XautoInheritance-xmlTypesExtend=org.cqframework.cql.elm.execution.Executable")
        }
    }
}
